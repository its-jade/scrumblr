<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scrumblr</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.14.0/Sortable.min.js"></script>
</head>
<body>

  <div class="scrumblr-logo-container">
    <div class="scrumblr-logo">
    <span class="logo-icon">âš¡</span>
      <span class="logo-text">Scrumblr</span>
    </div>
  </div>

  <div class="app-container">
    <div class="main-content">
      
      <div class="sidebar">
        <div class="project-section">
          <h1 id="project-title" contenteditable="true">Web Redesign</h1>
          <h3 id="project-due-date" contenteditable="true" class="due-date">Due: Oct 24</h3>
        </div>
        
        <div class="goals-section">
          <h2>Goals</h2>
          <p id="goals-content" contenteditable="true" class="editable-text">
            Refactor the homepage CSS, implement dark mode, and optimize images.
          </p>
        </div>

        <div class="members-section">
          <h2>Team</h2>
          <ul id="members-list">
            <li class="member-item">
              <span class="member-name">Alex Dev</span>
              <span class="member-actions">
                <button class="icon-btn edit-btn" onclick="editMember(this)">âœï¸</button>
                <button class="icon-btn delete-btn" onclick="deleteMember(this)">ğŸ—‘ï¸</button>
              </span>
            </li>
            <li class="member-item">
              <span class="member-name">Sam Design</span>
              <span class="member-actions">
                <button class="icon-btn edit-btn" onclick="editMember(this)">âœï¸</button>
                <button class="icon-btn delete-btn" onclick="deleteMember(this)">ğŸ—‘ï¸</button>
              </span>
            </li>
          </ul>
          <button id="add-member-btn" class="btn-outline" onclick="addMember()">+ Add Member</button>
        </div>

        <div class="upload-section">
          <h2>Assets</h2>
          <div id="drop-area">
            <p>Drag files here<br>or <span class="browse-link">browse</span></p>
          </div>
          <input type="file" id="file-input" hidden multiple />
          <ul id="file-list"></ul>
        </div>
      </div>

      <div class="kanban-board">
        
        <div class="column" id="col-start">
          <div class="column-header header-start">
            <h2>To Start</h2>
            <span class="task-count">0</span>
          </div>
          <div class="task-list" id="start-list">
            </div>
          <button class="btn-add-task" onclick="addTask('start-list')">+ Add Task</button>
        </div>

        <div class="column" id="col-progress">
          <div class="column-header header-progress">
            <h2>In Progress</h2>
            <span class="task-count">0</span>
          </div>
          <div class="task-list" id="progress-list"></div>
          <button class="btn-add-task" onclick="addTask('progress-list')">+ Add Task</button>
        </div>

        <div class="column" id="col-completed">
          <div class="column-header header-completed">
            <h2>Completed</h2>
            <span class="task-count">0</span>
          </div>
          <div class="task-list" id="completed-list"></div>
          <button class="btn-add-task" onclick="addTask('completed-list')">+ Add Task</button>
        </div>

      </div>
    </div>
  </div>

  <script>
    /* --- Member Management --- */
    function editMember(button) {
      const memberItem = button.closest('.member-item');
      const nameSpan = memberItem.querySelector('.member-name');
      const newName = prompt('Edit member name:', nameSpan.textContent);
      if (newName !== null && newName.trim() !== '') {
        nameSpan.textContent = newName.trim();
      }
    }

    function deleteMember(button) {
      if (confirm('Remove this member?')) {
        button.closest('.member-item').remove();
      }
    }

    function addMember() {
      const name = prompt('Enter new member name:');
      if (name && name.trim()) {
        const list = document.getElementById('members-list');
        const li = document.createElement('li');
        li.className = 'member-item';
        li.innerHTML = `
          <span class="member-name">${name.trim()}</span>
          <span class="member-actions">
            <button class="icon-btn edit-btn" onclick="editMember(this)">âœï¸</button>
            <button class="icon-btn delete-btn" onclick="deleteMember(this)">ğŸ—‘ï¸</button>
          </span>`;
        list.appendChild(li);
      }
    }

    /* --- File Upload Logic --- */
    const dropArea = document.getElementById('drop-area');
    const fileInput = document.getElementById('file-input');
    const fileList = document.getElementById('file-list');

    // Trigger file input on click
    dropArea.addEventListener('click', () => fileInput.click());

    // Handle Input Change
    fileInput.addEventListener('change', (e) => handleFiles(e.target.files));

    // Prevent default drag behaviors
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
      dropArea.addEventListener(eventName, preventDefaults, false);
    });

    function preventDefaults(e) {
      e.preventDefault();
      e.stopPropagation();
    }

    // Highlight drop area
    ['dragenter', 'dragover'].forEach(eventName => {
      dropArea.addEventListener(eventName, () => dropArea.classList.add('highlight'), false);
    });

    ['dragleave', 'drop'].forEach(eventName => {
      dropArea.addEventListener(eventName, () => dropArea.classList.remove('highlight'), false);
    });

    // Handle Drop
    dropArea.addEventListener('drop', (e) => {
      const dt = e.dataTransfer;
      const files = dt.files;
      handleFiles(files);
    });

    function handleFiles(files) {
      ([...files]).forEach(file => {
        const li = document.createElement('li');
        li.className = 'file-item';
        li.innerHTML = `<span>ğŸ“„ ${file.name}</span> <span class="remove-file" onclick="this.parentElement.remove()">Ã—</span>`;
        fileList.appendChild(li);
      });
    }

    /* --- Kanban Task Logic --- */
    
    // Initialize SortableJS for all columns
    ['start-list', 'progress-list', 'completed-list'].forEach(id => {
      new Sortable(document.getElementById(id), {
        group: 'shared', // set both lists to same group
        animation: 150,
        ghostClass: 'sortable-ghost'
      });
    });

    function addTask(listId) {
      const list = document.getElementById(listId);
      const task = document.createElement('div');
      task.className = 'task-card';
      task.innerHTML = `
        <div class="task-content" contenteditable="true">New Task</div>
        <button class="delete-task-btn" onclick="deleteTask(this)">ğŸ—‘ï¸</button>
      `;
      list.appendChild(task);
      updateCounts();
    }

    function deleteTask(btn) {
      if(confirm("Delete this task?")) {
        btn.parentElement.remove();
        updateCounts();
      }
    }

    // Optional: Update task counts (simple implementation)
    function updateCounts() {
      // Logic to update the numbers in headers could go here
    }

  </script>
</body>
</html>
